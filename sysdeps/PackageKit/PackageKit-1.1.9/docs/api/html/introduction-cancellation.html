<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Cancellation: PackageKit Reference Manual</title>
<meta name="generator" content="DocBook XSL Stylesheets Vsnapshot">
<link rel="home" href="index.html" title="PackageKit Reference Manual">
<link rel="up" href="concepts.html" title="Important Concepts">
<link rel="prev" href="introduction-group-type.html" title="Group type">
<link rel="next" href="introduction-ideas-transactions.html" title="Transactions">
<meta name="generator" content="GTK-Doc V1.27 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
<td width="100%" align="left" class="shortcuts"></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="concepts.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="introduction-group-type.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="introduction-ideas-transactions.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="introduction-cancellation"></a>Cancellation</h2></div></div></div>
<p>
      If you have a multipart transaction that can be aborted in one phase but
      not another then the AllowCancel signal can be sent.
      This allows for example the hif download to be cancelled, but not the
      install transaction.
      By cancelling a job all subtransactions are killed.
    </p>
<p>
      By default actions cannot be cancelled unless enabled in the backend.
      Use <code class="literal">AllowCancel(true)</code> to enable cancellation
      and <code class="literal">AllowCancel(false)</code> to disable it.
      This can be done for any job type.
    </p>
<p>
      For compiled backends that are threaded, the
      <code class="literal">cancel()</code> method can be used to terminate
      the thread.
    </p>
<p>
      For spawned backends, there are two staggered signals send to allow
      locks to be released or for the backend to clean up after itself:
    </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem"><p>Send the process <code class="literal">SIGQUIT</code>.</p></li>
<li class="listitem"><p>Wait 500ms</p></li>
<li class="listitem"><p>
          If the process has not already quit, send the process
          <code class="literal">SIGKILL</code> to terminate it.
        </p></li>
</ul></div>
</div>
<div class="footer">
<hr>Generated by GTK-Doc V1.27</div>
</body>
</html>